2025-04-25 19:02:25.544 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 19:02:25.545 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 19:02:25.584 |  | INFO     | config.get_db:init_create_table:26 - 数据库连接成功
2025-04-25 19:02:25.585 |  | INFO     | config.get_redis:create_redis_pool:19 - 开始连接redis...
2025-04-25 19:02:25.589 |  | INFO     | config.get_redis:create_redis_pool:32 - redis连接成功
2025-04-25 19:02:25.589 |  | INFO     | server:lifespan:22 - RuoYi-FastAPI启动成功
2025-04-25 11:34:29.567 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 11:34:29.568 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 11:38:01.092 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 11:38:01.092 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 11:38:01.289 |  | INFO     | config.get_db:init_create_table:26 - 数据库连接成功
2025-04-25 11:38:01.290 |  | INFO     | config.get_redis:create_redis_pool:19 - 开始连接redis...
2025-04-25 11:38:01.297 |  | INFO     | config.get_redis:create_redis_pool:32 - redis连接成功
2025-04-25 11:38:01.298 |  | INFO     | server:lifespan:22 - RuoYi-FastAPI启动成功
2025-04-25 11:38:43.581 | a280fd5785bb49ada64ed89814045d90 | INFO     | module_admin.controller.task_controller:add_task:74 - 新增成功
2025-04-25 11:38:56.416 | 8fe2f2b562174118af0ab19670131796 | ERROR    | exceptions.handle:exception_handler:53 - No primary key value supplied for column(s) sys_task.task_uid; per-row ORM Bulk UPDATE by Primary Key requires that records contain primary key values (Background on this error at: https://sqlalche.me/e/20/bupq)
Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/usr/local/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 12
               └ <function _main at 0x73faa0256dd0>
  File "/usr/local/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x73faa0425ea0>
           └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
  File "/usr/local/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x73faa0425510>
    └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
  File "/usr/local/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x73faa024b130>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
    │    └ <function subprocess_started at 0x73fa9f718310>
    └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=8, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 9099)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x73faa024b250>>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=8, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 9099)>]
           │       │   │    └ <function Server.serve at 0x73fa9f6f7520>
           │       │   └ <uvicorn.server.Server object at 0x73faa024b250>
           │       └ <function run at 0x73faa025e170>
           └ <module 'asyncio' from '/usr/local/lib/python3.10/asyncio/__init__.py'>
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x73fa9e2e4580>
           │    └ <cyfunction Loop.run_until_complete at 0x73fa9757be00>
           └ <uvloop.Loop running=True closed=False debug=False>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x73fa9e30fa00>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x73fa94e653...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x73fa94e...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x73faa024b520>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x73fa9e30fa00>
  File "/usr/local/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x73fa94e653...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x73fa94e...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
  File "/usr/local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x73fa94e653...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x73fa94e...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x73fa9e3765f0>
          └ <fastapi.applications.FastAPI object at 0x73faa024b520>
> File "/usr/local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x73fa94b2d240>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x73fa94e...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <middlewares.trace_middleware.middle.TraceASGIMiddleware object at 0x73fa9e376680>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x73fa9e3765f0>

  File "/app/middlewares/trace_middleware/middle.py", line 62, in __call__
    await self.app(scope, handle_outgoing_receive, handle_outgoing_request)
          │    │   │      │                        └ <function TraceASGIMiddleware.__call__.<locals>.handle_outgoing_request at 0x73fa94b2d1b0>
          │    │   │      └ <function RequestResponseCycle.receive at 0x73fa94b2caf0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x73fa9e3766b0>
          └ <middlewares.trace_middleware.middle.TraceASGIMiddleware object at 0x73fa9e376680>

  File "/usr/local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function TraceASGIMiddleware.__call__.<locals>.handle_outgoing_request at 0x73fa94b2d1b0>
          │                            │    │    │     │      └ <function RequestResponseCycle.receive at 0x73fa94b2caf0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x73fa94e67c70>
          │                            │    └ <fastapi.routing.APIRouter object at 0x73fa97374ee0>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x73fa9e3766b0>
          └ <function wrap_app_handling_exceptions at 0x73fa9e7570a0>
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x73fa94e081f0>
          │   │      └ <function RequestResponseCycle.receive at 0x73fa94b2caf0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          └ <fastapi.routing.APIRouter object at 0x73fa97374ee0>
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x73fa94e081f0>
          │    │                │      └ <function RequestResponseCycle.receive at 0x73fa94b2caf0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x73fa97374ee0>>
          └ <fastapi.routing.APIRouter object at 0x73fa97374ee0>
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x73fa94e081f0>
          │     │      │      └ <function RequestResponseCycle.receive at 0x73fa94b2caf0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │     └ <function Route.handle at 0x73fa9e780670>
          └ APIRoute(path='/monitor/task/start/{task_uid}', name='execute_system_task', methods=['PUT'])
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x73fa94e081f0>
          │    │   │      └ <function RequestResponseCycle.receive at 0x73fa94b2caf0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <function request_response.<locals>.app at 0x73fa9737b5b0>
          └ APIRoute(path='/monitor/task/start/{task_uid}', name='execute_system_task', methods=['PUT'])
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x73fa94e081f0>
          │                            │    │        │      └ <function RequestResponseCycle.receive at 0x73fa94b2caf0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │                            │    └ <starlette.requests.Request object at 0x73fa94e66fe0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x73fa94e08310>
          └ <function wrap_app_handling_exceptions at 0x73fa9e7570a0>
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x73fa94e08280>
          │   │      └ <function RequestResponseCycle.receive at 0x73fa94b2caf0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x73fa94e08310>
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x73fa94e66fe0>
                     └ <function get_request_handler.<locals>.app at 0x73fa9737b640>
  File "/usr/local/lib/python3.10/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x73fa9e782170>
  File "/usr/local/lib/python3.10/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'query_db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x73fa94e0c610>, 'task_uid': 'task_no_dependencies', 'req...
                 │         └ <function execute_system_task at 0x73fa9737a710>
                 └ Dependant(path_params=[ModelField(field_info=Path(PydanticUndefined), name='task_uid', mode='validation')], query_params=[], ...

  File "/app/module_admin/controller/task_controller.py", line 107, in execute_system_task
    execute_task_result = await TaskService.execute_task_once_services(
                                │           └ <classmethod(<function TaskService.execute_task_once_services at 0x73fa97379d80>)>
                                └ <class 'module_admin.service.task_service.TaskService'>

  File "/app/module_admin/service/task_service.py", line 188, in execute_task_once_services
    await task_scheduler.add_task(task_info)
          │              │        └ TaskModel(task_uid=None, task_name=None, task_initiator=None, task_group='default', task_yaml=[], concurrent='1', cron_expres...
          │              └ <function TaskSchedulerService.add_task at 0x73fa97379b40>
          └ <module_admin.service.job_service.TaskSchedulerService object at 0x73fa94b1b490>

  File "/app/module_admin/service/job_service.py", line 346, in add_task
    await self.progress_tracker.initialize(task)
          │    │                │          └ TaskModel(task_uid=None, task_name=None, task_initiator=None, task_group='default', task_yaml=[], concurrent='1', cron_expres...
          │    │                └ <function TaskProgressTracker.initialize at 0x73fa97379630>
          │    └ <module_admin.service.job_service.TaskProgressTracker object at 0x73fa94e0cac0>
          └ <module_admin.service.job_service.TaskSchedulerService object at 0x73fa94b1b490>

  File "/app/module_admin/service/job_service.py", line 250, in initialize
    await self._update_db(
          │    └ <function TaskProgressTracker._update_db at 0x73fa97379870>
          └ <module_admin.service.job_service.TaskProgressTracker object at 0x73fa94e0cac0>

  File "/app/module_admin/service/job_service.py", line 286, in _update_db
    await TaskDao.edit_task_dao(self.db, {"task_uid": task_uid, **updates})
          │       │             │    │                │           └ {'run_status': 'running', 'task_progress': 0}
          │       │             │    │                └ None
          │       │             │    └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x73fa94e0c610>
          │       │             └ <module_admin.service.job_service.TaskProgressTracker object at 0x73fa94e0cac0>
          │       └ <classmethod(<function TaskDao.edit_task_dao at 0x73fa9c07f760>)>
          └ <class 'module_admin.dao.task_dao.TaskDao'>

  File "/app/module_admin/dao/task_dao.py", line 147, in edit_task_dao
    await db.execute(update(SysTask), [task])
          │  │       │      │          └ {'task_uid': None, 'run_status': 'running', 'task_progress': 0}
          │  │       │      └ <class 'module_admin.entity.do.task_do.SysTask'>
          │  │       └ <function update at 0x73fa9dd94af0>
          │  └ <function AsyncSession.execute at 0x73fa9da595a0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x73fa94e0c610>

  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 463, in execute
    result = await greenlet_spawn(
                   └ <function greenlet_spawn at 0x73fa9e16d090>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 190, in greenlet_spawn
    result = context.switch(*args, **kwargs)
             │       │       │       └ {'params': [{'task_uid': None, 'run_status': 'running', 'task_progress': 0}], 'execution_options': immutabledict({'prebuffer_...
             │       │       └ (<sqlalchemy.sql.dml.Update object at 0x73fa94e0ca30>,)
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x73fa94b6b1c0 (otid=0x73fa9e48bd20) dead>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2365, in execute
    return self._execute_internal(
           │    └ <function Session._execute_internal at 0x73fa9d982440>
           └ <sqlalchemy.orm.session.Session object at 0x73fa94e0c670>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 2251, in _execute_internal
    result: Result[Any] = compile_state_cls.orm_execute_statement(
                   │      │                 └ <classmethod(<function BulkORMUpdate.orm_execute_statement at 0x73fa9db53130>)>
                   │      └ <class 'sqlalchemy.orm.bulk_persistence.BulkORMUpdate'>
                   └ typing.Any
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 1627, in orm_execute_statement
    result = _bulk_update(
             └ <function _bulk_update at 0x73fa9db51ea0>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/bulk_persistence.py", line 357, in _bulk_update
    persistence._emit_update_statements(
    │           └ <function _emit_update_statements at 0x73fa9db51900>
    └ <module 'sqlalchemy.orm.persistence' from '/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py'>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 778, in _emit_update_statements
    for (
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 560, in _collect_update_commands
    raise sa_exc.InvalidRequestError(
          │      └ <class 'sqlalchemy.exc.InvalidRequestError'>
          └ <module 'sqlalchemy.exc' from '/usr/local/lib/python3.10/site-packages/sqlalchemy/exc.py'>

sqlalchemy.exc.InvalidRequestError: No primary key value supplied for column(s) sys_task.task_uid; per-row ORM Bulk UPDATE by Primary Key requires that records contain primary key values (Background on this error at: https://sqlalche.me/e/20/bupq)
2025-04-25 11:39:15.211 | feac1ef6d0b948dd8c2f24ac137f76a9 | INFO     | module_admin.controller.task_controller:execute_system_task:110 - 执行成功
2025-04-25 12:08:50.789 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 12:08:50.790 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 12:08:50.821 |  | INFO     | config.get_db:init_create_table:26 - 数据库连接成功
2025-04-25 12:08:50.821 |  | INFO     | config.get_redis:create_redis_pool:19 - 开始连接redis...
2025-04-25 12:08:50.825 |  | INFO     | config.get_redis:create_redis_pool:32 - redis连接成功
2025-04-25 12:08:50.825 |  | INFO     | server:lifespan:22 - RuoYi-FastAPI启动成功
2025-04-25 12:11:37.119 | 9815c26772614886829464074f138b45 | ERROR    | exceptions.handle:exception_handler:53 - (asyncmy.errors.IntegrityError) (1062, "Duplicate entry 'job-alice-bob-041' for key 'sys_task.PRIMARY'")
[SQL: INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_policy, status, run_status, task_progress, priority, create_by, create_time, update_by, update_time, remark) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_task.scheduler_test.job", "job_args": "", "job_kwargs": "", "job_name": "psi ... (162 characters truncated) ... r_test.job", "job_args": "", "job_kwargs": "", "job_name": "psi2", "job_parties": "[\\"party1\\",\\"party2\\"]", "job_dependencies": "[\\"psi3\\"]"}]', '1', '0/10 * * * * ?', '3', '1', 'not started', 0, '0', '', datetime.datetime(2025, 4, 25, 12, 11, 37, 68301), '', datetime.datetime(2025, 4, 25, 12, 11, 37, 68411), 'test')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):

  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f4a8fc51360>
    │    └ <sqlalchemy.dialects.mysql.asyncmy.MySQLDialect_asyncmy object at 0x7f4a8fc4b9d0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f4a8c5e5150>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
    │      │       └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
    │      └ <function AsyncAdapt_asyncmy_cursor.execute at 0x7f4a8f866830>
    └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7f4a8c5ff470>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/dialects/mysql/asyncmy.py", line 95, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
           │    │      │    │              └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
           │    │      │    └ <function AsyncAdapt_asyncmy_cursor._execute_async at 0x7f4a8f866950>
           │    │      └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7f4a8c5ff470>
           │    └ <member 'await_' of 'AsyncAdapt_asyncmy_cursor' objects>
           └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7f4a8c5ff470>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncmy_cursor._execute_async at 0x7f4a8c5c53f0>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x7f4a8d36d440 (otid=0x7f4a9044bd20) dead>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <_cython_3_0_11.coroutine object at 0x7f4a8c611080>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/dialects/mysql/asyncmy.py", line 107, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
                   │    │               └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
                   │    └ <member '_cursor' of 'AsyncAdapt_asyncmy_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7f4a8c5ff470>
  File "asyncmy/cursors.pyx", line 179, in execute
    result = await self._query(query)
  File "asyncmy/cursors.pyx", line 364, in _query
    await conn.query(q)
  File "asyncmy/connection.pyx", line 496, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "asyncmy/connection.pyx", line 684, in _read_query_result
    await result.read()
  File "asyncmy/connection.pyx", line 1071, in read
    first_packet = await self.connection.read_packet()
  File "asyncmy/connection.pyx", line 646, in read_packet
    packet.raise_for_error()
  File "asyncmy/protocol.pyx", line 190, in asyncmy.protocol.MysqlPacket.raise_for_error
    cpdef raise_for_error(self):
  File "asyncmy/protocol.pyx", line 194, in asyncmy.protocol.MysqlPacket.raise_for_error
    errors.raise_mysql_exception(self._data)
    │      └ <cyfunction raise_mysql_exception at 0x7f4a8f93b510>
    └ <module 'asyncmy.errors' from '/usr/local/lib/python3.10/site-packages/asyncmy/errors.cpython-310-x86_64-linux-gnu.so'>
  File "asyncmy/errors.pyx", line 128, in asyncmy.errors.raise_mysql_exception
    cpdef raise_mysql_exception(bytes data):
          └ <cyfunction raise_mysql_exception at 0x7f4a8f93b510>
  File "asyncmy/errors.pyx", line 137, in asyncmy.errors.raise_mysql_exception
    raise error_class(errno, err_val)

asyncmy.errors.IntegrityError: (1062, "Duplicate entry 'job-alice-bob-041' for key 'sys_task.PRIMARY'")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/usr/local/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 12
               └ <function _main at 0x7f4a92216dd0>
  File "/usr/local/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7f4a923e9ea0>
           └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
  File "/usr/local/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7f4a923e9510>
    └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
  File "/usr/local/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7f4a9220b130>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
    │    └ <function subprocess_started at 0x7f4a916d8310>
    └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=8, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 9099)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7f4a9220b250>>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=8, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 9099)>]
           │       │   │    └ <function Server.serve at 0x7f4a916b7520>
           │       │   └ <uvicorn.server.Server object at 0x7f4a9220b250>
           │       └ <function run at 0x7f4a9221e170>
           └ <module 'asyncio' from '/usr/local/lib/python3.10/asyncio/__init__.py'>
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7f4a8d323290>
           │    └ <cyfunction Loop.run_until_complete at 0x7f4a8d55fed0>
           └ <uvloop.Loop running=True closed=False debug=False>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4a902a8a00>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4a9035b3...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4a903...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7f4a9220b520>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7f4a902a8a00>
  File "/usr/local/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4a9035b3...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4a903...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
  File "/usr/local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4a9035b3...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4a903...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4a9030ef80>
          └ <fastapi.applications.FastAPI object at 0x7f4a9220b520>
> File "/usr/local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7f4a9033b490>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7f4a903...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <middlewares.trace_middleware.middle.TraceASGIMiddleware object at 0x7f4a9030f010>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7f4a9030ef80>

  File "/app/middlewares/trace_middleware/middle.py", line 62, in __call__
    await self.app(scope, handle_outgoing_receive, handle_outgoing_request)
          │    │   │      │                        └ <function TraceASGIMiddleware.__call__.<locals>.handle_outgoing_request at 0x7f4a8c59c430>
          │    │   │      └ <function RequestResponseCycle.receive at 0x7f4a8c59c3a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x7f4a9030f040>
          └ <middlewares.trace_middleware.middle.TraceASGIMiddleware object at 0x7f4a9030f010>

  File "/usr/local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function TraceASGIMiddleware.__call__.<locals>.handle_outgoing_request at 0x7f4a8c59c430>
          │                            │    │    │     │      └ <function RequestResponseCycle.receive at 0x7f4a8c59c3a0>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7f4a9035b580>
          │                            │    └ <fastapi.routing.APIRouter object at 0x7f4a8d350f10>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x7f4a9030f040>
          └ <function wrap_app_handling_exceptions at 0x7f4a9092b0a0>
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7f4a8c59c4c0>
          │   │      └ <function RequestResponseCycle.receive at 0x7f4a8c59c3a0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          └ <fastapi.routing.APIRouter object at 0x7f4a8d350f10>
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7f4a8c59c4c0>
          │    │                │      └ <function RequestResponseCycle.receive at 0x7f4a8c59c3a0>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x7f4a8d350f10>>
          └ <fastapi.routing.APIRouter object at 0x7f4a8d350f10>
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7f4a8c59c4c0>
          │     │      │      └ <function RequestResponseCycle.receive at 0x7f4a8c59c3a0>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │     └ <function Route.handle at 0x7f4a90744670>
          └ APIRoute(path='/monitor/add_task', name='add_task', methods=['POST'])
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7f4a8c59c4c0>
          │    │   │      └ <function RequestResponseCycle.receive at 0x7f4a8c59c3a0>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <function request_response.<locals>.app at 0x7f4a8d357760>
          └ APIRoute(path='/monitor/add_task', name='add_task', methods=['POST'])
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7f4a8c59c4c0>
          │                            │    │        │      └ <function RequestResponseCycle.receive at 0x7f4a8c59c3a0>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7f4a90358040>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7f4a8c59c550>
          └ <function wrap_app_handling_exceptions at 0x7f4a9092b0a0>
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7f4a8c59c5e0>
          │   │      └ <function RequestResponseCycle.receive at 0x7f4a8c59c3a0>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7f4a8c59c550>
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7f4a90358040>
                     └ <function get_request_handler.<locals>.app at 0x7f4a8d3576d0>
  File "/usr/local/lib/python3.10/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7f4a90746170>
  File "/usr/local/lib/python3.10/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'query_db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7f4a9035ba00>, 'add_task': TaskModel(task_uid='job-alic...
                 │         └ <function add_task at 0x7f4a8d356560>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/module_admin/controller/task_controller.py", line 71, in add_task
    add_task_result = await TaskService.add_task_services(
                            │           └ <classmethod(<function TaskService.add_task_services at 0x7f4a8d355e10>)>
                            └ <class 'module_admin.service.task_service.TaskService'>

  File "/app/module_admin/service/task_service.py", line 91, in add_task_services
    raise e

  File "/app/module_admin/service/task_service.py", line 76, in add_task_services
    add_task = await TaskDao.add_task_dao(query_db, page_object)
                     │       │            │         └ TaskModel(task_uid='job-alice-bob-041', task_name='task2', task_initiator='alice', task_group='default', task_yaml=[JobModel(...
                     │       │            └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7f4a9035ba00>
                     │       └ <classmethod(<function TaskDao.add_task_dao at 0x7f4a8d81b6d0>)>
                     └ <class 'module_admin.dao.task_dao.TaskDao'>

  File "/app/module_admin/dao/task_dao.py", line 134, in add_task_dao
    await db.flush()
          │  └ <function AsyncSession.flush at 0x7f4a8f9f5ab0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7f4a9035ba00>

  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 802, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
          │              │    │            │              └ None
          │              │    │            └ <function Session.flush at 0x7f4a8fb1ff40>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x7f4a9035bac0>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7f4a9035ba00>
          └ <function greenlet_spawn at 0x7f4a90129090>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x7f4a8d36d440 (otid=0x7f4a9044bd20) dead>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7f4a8fb20160>
    └ <sqlalchemy.orm.session.Session object at 0x7f4a9035bac0>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/usr/local/lib/python3.10/site-packages/sqlalchemy/util/__init__.py'>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7f4a8c639680>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(asyncmy.errors.IntegrityError) (1062, "Duplicate entry \'job-alice-bob-041\' for key \'sys_task.PRIMARY\'")')
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7f4a8fb0a290>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f4a8c5e6a40>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7f4a8c5e6a40>
    │   └ <function SaveUpdateAll.execute at 0x7f4a8fb0ab90>
    └ SaveUpdateAll(Mapper[SysTask(sys_task)])
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7f4a8faec430>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py'>
    │    └ <module 'sqlalchemy.util.preloaded' from '/usr/local/lib/python3.10/site-packages/sqlalchemy/util/preloaded.py'>
    └ <module 'sqlalchemy.util' from '/usr/local/lib/python3.10/site-packages/sqlalchemy/util/__init__.py'>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7f4a8faed990>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7f4a8fda1870>
             └ <sqlalchemy.engine.base.Connection object at 0x7f4a8c5e5150>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7f4a8c628d90>>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7f4a8fda1b40>
           └ <sqlalchemy.engine.base.Connection object at 0x7f4a8c5e5150>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7f4a8fda1cf0>
          └ <sqlalchemy.engine.base.Connection object at 0x7f4a8c5e5150>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7f4a8fda1d80>
           └ <sqlalchemy.engine.base.Connection object at 0x7f4a8c5e5150>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7f4a8fda1fc0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f4a8c5e5150>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1062, "Duplicate entry 'job-alice-bob-041' for key 'sys_task.PRIMARY'")
          │                    │              └ (<class 'asyncmy.errors.IntegrityError'>, IntegrityError(1062, "Duplicate entry 'job-alice-bob-041' for key 'sys_task.PRIMARY...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(asyncmy.errors.IntegrityError) (1062, "Duplicate entry \'job-alice-bob-041\' for key \'sys_task.PRIMARY\'")')
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7f4a8fc51360>
    │    └ <sqlalchemy.dialects.mysql.asyncmy.MySQLDialect_asyncmy object at 0x7f4a8fc4b9d0>
    └ <sqlalchemy.engine.base.Connection object at 0x7f4a8c5e5150>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
    │      │       └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
    │      └ <function AsyncAdapt_asyncmy_cursor.execute at 0x7f4a8f866830>
    └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7f4a8c5ff470>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/dialects/mysql/asyncmy.py", line 95, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
           │    │      │    │              └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
           │    │      │    └ <function AsyncAdapt_asyncmy_cursor._execute_async at 0x7f4a8f866950>
           │    │      └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7f4a8c5ff470>
           │    └ <member 'await_' of 'AsyncAdapt_asyncmy_cursor' objects>
           └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7f4a8c5ff470>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncmy_cursor._execute_async at 0x7f4a8c5c53f0>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x7f4a8d36d440 (otid=0x7f4a9044bd20) dead>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <_cython_3_0_11.coroutine object at 0x7f4a8c611080>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/dialects/mysql/asyncmy.py", line 107, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
                   │    │               └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
                   │    └ <member '_cursor' of 'AsyncAdapt_asyncmy_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7f4a8c5ff470>
  File "asyncmy/cursors.pyx", line 179, in execute
    result = await self._query(query)
  File "asyncmy/cursors.pyx", line 364, in _query
    await conn.query(q)
  File "asyncmy/connection.pyx", line 496, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "asyncmy/connection.pyx", line 684, in _read_query_result
    await result.read()
  File "asyncmy/connection.pyx", line 1071, in read
    first_packet = await self.connection.read_packet()
  File "asyncmy/connection.pyx", line 646, in read_packet
    packet.raise_for_error()
  File "asyncmy/protocol.pyx", line 190, in asyncmy.protocol.MysqlPacket.raise_for_error
    cpdef raise_for_error(self):
  File "asyncmy/protocol.pyx", line 194, in asyncmy.protocol.MysqlPacket.raise_for_error
    errors.raise_mysql_exception(self._data)
    │      └ <cyfunction raise_mysql_exception at 0x7f4a8f93b510>
    └ <module 'asyncmy.errors' from '/usr/local/lib/python3.10/site-packages/asyncmy/errors.cpython-310-x86_64-linux-gnu.so'>
  File "asyncmy/errors.pyx", line 128, in asyncmy.errors.raise_mysql_exception
    cpdef raise_mysql_exception(bytes data):
          └ <cyfunction raise_mysql_exception at 0x7f4a8f93b510>
  File "asyncmy/errors.pyx", line 137, in asyncmy.errors.raise_mysql_exception
    raise error_class(errno, err_val)

sqlalchemy.exc.IntegrityError: (asyncmy.errors.IntegrityError) (1062, "Duplicate entry 'job-alice-bob-041' for key 'sys_task.PRIMARY'")
[SQL: INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_policy, status, run_status, task_progress, priority, create_by, create_time, update_by, update_time, remark) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_task.scheduler_test.job", "job_args": "", "job_kwargs": "", "job_name": "psi ... (162 characters truncated) ... r_test.job", "job_args": "", "job_kwargs": "", "job_name": "psi2", "job_parties": "[\\"party1\\",\\"party2\\"]", "job_dependencies": "[\\"psi3\\"]"}]', '1', '0/10 * * * * ?', '3', '1', 'not started', 0, '0', '', datetime.datetime(2025, 4, 25, 12, 11, 37, 68301), '', datetime.datetime(2025, 4, 25, 12, 11, 37, 68411), 'test')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-25 12:11:45.959 | 97790d1d60484656b6db2fbd71957a03 | INFO     | module_admin.controller.task_controller:get_task_list:55 - 获取成功
2025-04-25 12:12:10.911 | fd328de2b54145468e8e059167fffb1f | INFO     | module_admin.controller.task_controller:execute_system_task:112 - 执行成功
2025-04-25 12:12:38.726 | fc9a16f32bd94a41ba55405464d91c36 | ERROR    | exceptions.handle:service_exception_handler:34 - 终止任务流失败: API请求失败: All connection attempts failed
2025-04-25 12:13:37.705 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 12:13:37.705 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 12:13:37.739 |  | INFO     | config.get_db:init_create_table:26 - 数据库连接成功
2025-04-25 12:13:37.739 |  | INFO     | config.get_redis:create_redis_pool:19 - 开始连接redis...
2025-04-25 12:13:37.743 |  | INFO     | config.get_redis:create_redis_pool:32 - redis连接成功
2025-04-25 12:13:37.744 |  | INFO     | server:lifespan:22 - RuoYi-FastAPI启动成功
2025-04-25 12:13:42.994 | c0957e89defb4117ba5d3259fe4b175a | INFO     | module_admin.controller.task_controller:stop_task:128 - 任务停止成功
2025-04-25 12:21:54.939 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 12:21:54.939 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 12:21:54.972 |  | INFO     | config.get_db:init_create_table:26 - 数据库连接成功
2025-04-25 12:21:54.972 |  | INFO     | config.get_redis:create_redis_pool:19 - 开始连接redis...
2025-04-25 12:21:54.976 |  | INFO     | config.get_redis:create_redis_pool:32 - redis连接成功
2025-04-25 12:21:54.977 |  | INFO     | server:lifespan:22 - RuoYi-FastAPI启动成功
2025-04-25 12:28:09.215 | c89bd417002944e5a4fe3cde92910b56 | INFO     | module_admin.controller.task_controller:execute_system_task:112 - 执行成功
2025-04-25 12:28:47.572 | 700148a815e64b9d8aad6a7c23e0c70a | INFO     | module_admin.controller.task_controller:execute_system_task:112 - 执行成功
2025-04-25 12:30:08.003 | 6b1dcd3cedcd45db895ed1fa7e289485 | INFO     | module_admin.controller.task_controller:query_detail_task:34 - 获取task_uid为job-alice-bob-041的信息成功
2025-04-25 12:30:52.156 | bbb21da8962d464a82978a06b7e6cffb | INFO     | module_admin.controller.task_controller:get_task_list:57 - 获取成功
2025-04-25 12:30:56.783 | e38adaabc9e54111b59d7b01c6aeaeae | INFO     | module_admin.controller.task_controller:get_task_list:57 - 获取成功
2025-04-25 12:31:23.561 | d5f22ad4b2f944ecb4b0ebcf85b0776f | ERROR    | exceptions.handle:exception_handler:53 - (asyncmy.errors.IntegrityError) (1062, "Duplicate entry 'job-alice-bob-041' for key 'sys_task.PRIMARY'")
[SQL: INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_policy, status, run_status, task_progress, priority, create_by, create_time, update_by, update_time, remark) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_task.scheduler_test.job", "job_args": "", "job_kwargs": "", "job_name": "psi ... (162 characters truncated) ... r_test.job", "job_args": "", "job_kwargs": "", "job_name": "psi2", "job_parties": "[\\"party1\\",\\"party2\\"]", "job_dependencies": "[\\"psi3\\"]"}]', '1', '0/10 * * * * ?', '3', '1', 'not started', 0, '0', '', datetime.datetime(2025, 4, 25, 12, 31, 23, 530024), '', datetime.datetime(2025, 4, 25, 12, 31, 23, 530122), 'test')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
Traceback (most recent call last):

  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7a7d2a125360>
    │    └ <sqlalchemy.dialects.mysql.asyncmy.MySQLDialect_asyncmy object at 0x7a7d2a11f9d0>
    └ <sqlalchemy.engine.base.Connection object at 0x7a7d20f691e0>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
    │      │       └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
    │      └ <function AsyncAdapt_asyncmy_cursor.execute at 0x7a7d29d4a830>
    └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7a7d20f78630>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/dialects/mysql/asyncmy.py", line 95, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
           │    │      │    │              └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
           │    │      │    └ <function AsyncAdapt_asyncmy_cursor._execute_async at 0x7a7d29d4a950>
           │    │      └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7a7d20f78630>
           │    └ <member 'await_' of 'AsyncAdapt_asyncmy_cursor' objects>
           └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7a7d20f78630>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncmy_cursor._execute_async at 0x7a7d20f12960>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x7a7d20f1b800 (otid=0x7a7d2a907d20) dead>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <_cython_3_0_11.coroutine object at 0x7a7d211a1440>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/dialects/mysql/asyncmy.py", line 107, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
                   │    │               └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
                   │    └ <member '_cursor' of 'AsyncAdapt_asyncmy_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7a7d20f78630>
  File "asyncmy/cursors.pyx", line 179, in execute
    result = await self._query(query)
  File "asyncmy/cursors.pyx", line 364, in _query
    await conn.query(q)
  File "asyncmy/connection.pyx", line 496, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "asyncmy/connection.pyx", line 684, in _read_query_result
    await result.read()
  File "asyncmy/connection.pyx", line 1071, in read
    first_packet = await self.connection.read_packet()
  File "asyncmy/connection.pyx", line 646, in read_packet
    packet.raise_for_error()
  File "asyncmy/protocol.pyx", line 190, in asyncmy.protocol.MysqlPacket.raise_for_error
    cpdef raise_for_error(self):
  File "asyncmy/protocol.pyx", line 194, in asyncmy.protocol.MysqlPacket.raise_for_error
    errors.raise_mysql_exception(self._data)
    │      └ <cyfunction raise_mysql_exception at 0x7a7d29e1f510>
    └ <module 'asyncmy.errors' from '/usr/local/lib/python3.10/site-packages/asyncmy/errors.cpython-310-x86_64-linux-gnu.so'>
  File "asyncmy/errors.pyx", line 128, in asyncmy.errors.raise_mysql_exception
    cpdef raise_mysql_exception(bytes data):
          └ <cyfunction raise_mysql_exception at 0x7a7d29e1f510>
  File "asyncmy/errors.pyx", line 137, in asyncmy.errors.raise_mysql_exception
    raise error_class(errno, err_val)

asyncmy.errors.IntegrityError: (1062, "Duplicate entry 'job-alice-bob-041' for key 'sys_task.PRIMARY'")


The above exception was the direct cause of the following exception:


Traceback (most recent call last):

  File "<string>", line 1, in <module>
  File "/usr/local/lib/python3.10/multiprocessing/spawn.py", line 116, in spawn_main
    exitcode = _main(fd, parent_sentinel)
               │     │   └ 3
               │     └ 12
               └ <function _main at 0x7a7d2c6d2dd0>
  File "/usr/local/lib/python3.10/multiprocessing/spawn.py", line 129, in _main
    return self._bootstrap(parent_sentinel)
           │    │          └ 3
           │    └ <function BaseProcess._bootstrap at 0x7a7d2c8a1ea0>
           └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
  File "/usr/local/lib/python3.10/multiprocessing/process.py", line 314, in _bootstrap
    self.run()
    │    └ <function BaseProcess.run at 0x7a7d2c8a1510>
    └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
  File "/usr/local/lib/python3.10/multiprocessing/process.py", line 108, in run
    self._target(*self._args, **self._kwargs)
    │    │        │    │        │    └ {'config': <uvicorn.config.Config object at 0x7a7d2c6c7130>, 'target': <bound method Server.run of <uvicorn.server.Server obj...
    │    │        │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
    │    │        │    └ ()
    │    │        └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
    │    └ <function subprocess_started at 0x7a7d2bb94310>
    └ <SpawnProcess name='SpawnProcess-1' parent=1 started>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/_subprocess.py", line 80, in subprocess_started
    target(sockets=sockets)
    │              └ [<socket.socket fd=8, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 9099)>]
    └ <bound method Server.run of <uvicorn.server.Server object at 0x7a7d2c6c7250>>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/server.py", line 66, in run
    return asyncio.run(self.serve(sockets=sockets))
           │       │   │    │             └ [<socket.socket fd=8, family=AddressFamily.AF_INET, type=SocketKind.SOCK_STREAM, proto=0, laddr=('0.0.0.0', 9099)>]
           │       │   │    └ <function Server.serve at 0x7a7d2bb73520>
           │       │   └ <uvicorn.server.Server object at 0x7a7d2c6c7250>
           │       └ <function run at 0x7a7d2c6da170>
           └ <module 'asyncio' from '/usr/local/lib/python3.10/asyncio/__init__.py'>
  File "/usr/local/lib/python3.10/asyncio/runners.py", line 44, in run
    return loop.run_until_complete(main)
           │    │                  └ <coroutine object Server.serve at 0x7a7d237dc7b0>
           │    └ <cyfunction Loop.run_until_complete at 0x7a7d28233ed0>
           └ <uvloop.Loop running=True closed=False debug=False>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/protocols/http/httptools_impl.py", line 409, in run_asgi
    result = await app(  # type: ignore[func-returns-value]
                   └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7a7d2a77c790>
  File "/usr/local/lib/python3.10/site-packages/uvicorn/middleware/proxy_headers.py", line 60, in __call__
    return await self.app(scope, receive, send)
                 │    │   │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7a7d2a8337...
                 │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7a7d2a8...
                 │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
                 │    └ <fastapi.applications.FastAPI object at 0x7a7d2c6c7520>
                 └ <uvicorn.middleware.proxy_headers.ProxyHeadersMiddleware object at 0x7a7d2a77c790>
  File "/usr/local/lib/python3.10/site-packages/fastapi/applications.py", line 1054, in __call__
    await super().__call__(scope, receive, send)
                           │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7a7d2a8337...
                           │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7a7d2a8...
                           └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
  File "/usr/local/lib/python3.10/site-packages/starlette/applications.py", line 112, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <bound method RequestResponseCycle.send of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7a7d2a8337...
          │    │                │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7a7d2a8...
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7a7d2a7e2d10>
          └ <fastapi.applications.FastAPI object at 0x7a7d2c6c7520>
> File "/usr/local/lib/python3.10/site-packages/starlette/middleware/errors.py", line 165, in __call__
    await self.app(scope, receive, _send)
          │    │   │      │        └ <function ServerErrorMiddleware.__call__.<locals>._send at 0x7a7d20f3c940>
          │    │   │      └ <bound method RequestResponseCycle.receive of <uvicorn.protocols.http.httptools_impl.RequestResponseCycle object at 0x7a7d2a8...
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <middlewares.trace_middleware.middle.TraceASGIMiddleware object at 0x7a7d2a7e2da0>
          └ <starlette.middleware.errors.ServerErrorMiddleware object at 0x7a7d2a7e2d10>

  File "/app/middlewares/trace_middleware/middle.py", line 62, in __call__
    await self.app(scope, handle_outgoing_receive, handle_outgoing_request)
          │    │   │      │                        └ <function TraceASGIMiddleware.__call__.<locals>.handle_outgoing_request at 0x7a7d20f4ecb0>
          │    │   │      └ <function RequestResponseCycle.receive at 0x7a7d20f4eb00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x7a7d2a7e2dd0>
          └ <middlewares.trace_middleware.middle.TraceASGIMiddleware object at 0x7a7d2a7e2da0>

  File "/usr/local/lib/python3.10/site-packages/starlette/middleware/exceptions.py", line 62, in __call__
    await wrap_app_handling_exceptions(self.app, conn)(scope, receive, send)
          │                            │    │    │     │      │        └ <function TraceASGIMiddleware.__call__.<locals>.handle_outgoing_request at 0x7a7d20f4ecb0>
          │                            │    │    │     │      └ <function RequestResponseCycle.receive at 0x7a7d20f4eb00>
          │                            │    │    │     └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │                            │    │    └ <starlette.requests.Request object at 0x7a7d20f170a0>
          │                            │    └ <fastapi.routing.APIRouter object at 0x7a7d23768e80>
          │                            └ <starlette.middleware.exceptions.ExceptionMiddleware object at 0x7a7d2a7e2dd0>
          └ <function wrap_app_handling_exceptions at 0x7a7d2abd30a0>
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7a7d20f4ea70>
          │   │      └ <function RequestResponseCycle.receive at 0x7a7d20f4eb00>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          └ <fastapi.routing.APIRouter object at 0x7a7d23768e80>
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 715, in __call__
    await self.middleware_stack(scope, receive, send)
          │    │                │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7a7d20f4ea70>
          │    │                │      └ <function RequestResponseCycle.receive at 0x7a7d20f4eb00>
          │    │                └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <bound method Router.app of <fastapi.routing.APIRouter object at 0x7a7d23768e80>>
          └ <fastapi.routing.APIRouter object at 0x7a7d23768e80>
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 735, in app
    await route.handle(scope, receive, send)
          │     │      │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7a7d20f4ea70>
          │     │      │      └ <function RequestResponseCycle.receive at 0x7a7d20f4eb00>
          │     │      └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │     └ <function Route.handle at 0x7a7d2abfc670>
          └ APIRoute(path='/scheduler/task/add', name='add_task', methods=['POST'])
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 288, in handle
    await self.app(scope, receive, send)
          │    │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7a7d20f4ea70>
          │    │   │      └ <function RequestResponseCycle.receive at 0x7a7d20f4eb00>
          │    │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │    └ <function request_response.<locals>.app at 0x7a7d23767760>
          └ APIRoute(path='/scheduler/task/add', name='add_task', methods=['POST'])
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 76, in app
    await wrap_app_handling_exceptions(app, request)(scope, receive, send)
          │                            │    │        │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7a7d20f4ea70>
          │                            │    │        │      └ <function RequestResponseCycle.receive at 0x7a7d20f4eb00>
          │                            │    │        └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          │                            │    └ <starlette.requests.Request object at 0x7a7d20eda7a0>
          │                            └ <function request_response.<locals>.app.<locals>.app at 0x7a7d20f4e680>
          └ <function wrap_app_handling_exceptions at 0x7a7d2abd30a0>
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 53, in wrapped_app
    raise exc
  File "/usr/local/lib/python3.10/site-packages/starlette/_exception_handler.py", line 42, in wrapped_app
    await app(scope, receive, sender)
          │   │      │        └ <function wrap_app_handling_exceptions.<locals>.wrapped_app.<locals>.sender at 0x7a7d20f4e560>
          │   │      └ <function RequestResponseCycle.receive at 0x7a7d20f4eb00>
          │   └ {'type': 'http', 'asgi': {'version': '3.0', 'spec_version': '2.3'}, 'http_version': '1.1', 'server': ('172.22.0.4', 9099), 'c...
          └ <function request_response.<locals>.app.<locals>.app at 0x7a7d20f4e680>
  File "/usr/local/lib/python3.10/site-packages/starlette/routing.py", line 73, in app
    response = await f(request)
                     │ └ <starlette.requests.Request object at 0x7a7d20eda7a0>
                     └ <function get_request_handler.<locals>.app at 0x7a7d237676d0>
  File "/usr/local/lib/python3.10/site-packages/fastapi/routing.py", line 301, in app
    raw_response = await run_endpoint_function(
                         └ <function run_endpoint_function at 0x7a7d2abfe170>
  File "/usr/local/lib/python3.10/site-packages/fastapi/routing.py", line 212, in run_endpoint_function
    return await dependant.call(**values)
                 │         │      └ {'query_db': <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7a7d20f68850>, 'add_task': TaskModel(task_uid='job-alic...
                 │         └ <function add_task at 0x7a7d23766560>
                 └ Dependant(path_params=[], query_params=[], header_params=[], cookie_params=[], body_params=[ModelField(field_info=Body(Pydant...

  File "/app/module_admin/controller/task_controller.py", line 73, in add_task
    add_task_result = await TaskService.add_task_services(
                            │           └ <classmethod(<function TaskService.add_task_services at 0x7a7d23765e10>)>
                            └ <class 'module_admin.service.task_service.TaskService'>

  File "/app/module_admin/service/task_service.py", line 91, in add_task_services
    raise e

  File "/app/module_admin/service/task_service.py", line 76, in add_task_services
    add_task = await TaskDao.add_task_dao(query_db, page_object)
                     │       │            │         └ TaskModel(task_uid='job-alice-bob-041', task_name='task2', task_initiator='alice', task_group='default', task_yaml=[JobModel(...
                     │       │            └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7a7d20f68850>
                     │       └ <classmethod(<function TaskDao.add_task_dao at 0x7a7d284ff6d0>)>
                     └ <class 'module_admin.dao.task_dao.TaskDao'>

  File "/app/module_admin/dao/task_dao.py", line 134, in add_task_dao
    await db.flush()
          │  └ <function AsyncSession.flush at 0x7a7d29ed5ab0>
          └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7a7d20f68850>

  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/ext/asyncio/session.py", line 802, in flush
    await greenlet_spawn(self.sync_session.flush, objects=objects)
          │              │    │            │              └ None
          │              │    │            └ <function Session.flush at 0x7a7d29dfff40>
          │              │    └ <sqlalchemy.orm.session.Session object at 0x7a7d20f68970>
          │              └ <sqlalchemy.ext.asyncio.session.AsyncSession object at 0x7a7d20f68850>
          └ <function greenlet_spawn at 0x7a7d2a5e9090>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 203, in greenlet_spawn
    result = context.switch(value)
             │       │      └ None
             │       └ <method 'switch' of 'greenlet.greenlet' objects>
             └ <_AsyncIoGreenlet object at 0x7a7d20f1b800 (otid=0x7a7d2a907d20) dead>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4353, in flush
    self._flush(objects)
    │    │      └ None
    │    └ <function Session._flush at 0x7a7d29e00160>
    └ <sqlalchemy.orm.session.Session object at 0x7a7d20f68970>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4488, in _flush
    with util.safe_reraise():
         │    └ <class 'sqlalchemy.util.langhelpers.safe_reraise'>
         └ <module 'sqlalchemy.util' from '/usr/local/lib/python3.10/site-packages/sqlalchemy/util/__init__.py'>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/langhelpers.py", line 146, in __exit__
    raise exc_value.with_traceback(exc_tb)
          │         │              └ <traceback object at 0x7a7d20f777c0>
          │         └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(asyncmy.errors.IntegrityError) (1062, "Duplicate entry \'job-alice-bob-041\' for key \'sys_task.PRIMARY\'")')
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/session.py", line 4449, in _flush
    flush_context.execute()
    │             └ <function UOWTransaction.execute at 0x7a7d29dee290>
    └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7a7d20f68d30>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 466, in execute
    rec.execute(self)
    │   │       └ <sqlalchemy.orm.unitofwork.UOWTransaction object at 0x7a7d20f68d30>
    │   └ <function SaveUpdateAll.execute at 0x7a7d29deeb90>
    └ SaveUpdateAll(Mapper[SysTask(sys_task)])
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/unitofwork.py", line 642, in execute
    util.preloaded.orm_persistence.save_obj(
    │    │         │               └ <function save_obj at 0x7a7d29fcc430>
    │    │         └ <module 'sqlalchemy.orm.persistence' from '/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py'>
    │    └ <module 'sqlalchemy.util.preloaded' from '/usr/local/lib/python3.10/site-packages/sqlalchemy/util/preloaded.py'>
    └ <module 'sqlalchemy.util' from '/usr/local/lib/python3.10/site-packages/sqlalchemy/util/__init__.py'>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 93, in save_obj
    _emit_insert_statements(
    └ <function _emit_insert_statements at 0x7a7d29fcd990>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/orm/persistence.py", line 1048, in _emit_insert_statements
    result = connection.execute(
             │          └ <function Connection.execute at 0x7a7d2a271870>
             └ <sqlalchemy.engine.base.Connection object at 0x7a7d20f691e0>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1416, in execute
    return meth(
           └ <bound method ClauseElement._execute_on_connection of <sqlalchemy.sql.dml.Insert object at 0x7a7d20f69e40>>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/sql/elements.py", line 516, in _execute_on_connection
    return connection._execute_clauseelement(
           │          └ <function Connection._execute_clauseelement at 0x7a7d2a271b40>
           └ <sqlalchemy.engine.base.Connection object at 0x7a7d20f691e0>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1638, in _execute_clauseelement
    ret = self._execute_context(
          │    └ <function Connection._execute_context at 0x7a7d2a271cf0>
          └ <sqlalchemy.engine.base.Connection object at 0x7a7d20f691e0>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1843, in _execute_context
    return self._exec_single_context(
           │    └ <function Connection._exec_single_context at 0x7a7d2a271d80>
           └ <sqlalchemy.engine.base.Connection object at 0x7a7d20f691e0>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1983, in _exec_single_context
    self._handle_dbapi_exception(
    │    └ <function Connection._handle_dbapi_exception at 0x7a7d2a271fc0>
    └ <sqlalchemy.engine.base.Connection object at 0x7a7d20f691e0>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 2352, in _handle_dbapi_exception
    raise sqlalchemy_exception.with_traceback(exc_info[2]) from e
          │                    │              │                 └ IntegrityError(1062, "Duplicate entry 'job-alice-bob-041' for key 'sys_task.PRIMARY'")
          │                    │              └ (<class 'asyncmy.errors.IntegrityError'>, IntegrityError(1062, "Duplicate entry 'job-alice-bob-041' for key 'sys_task.PRIMARY...
          │                    └ <method 'with_traceback' of 'BaseException' objects>
          └ IntegrityError('(asyncmy.errors.IntegrityError) (1062, "Duplicate entry \'job-alice-bob-041\' for key \'sys_task.PRIMARY\'")')
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/base.py", line 1964, in _exec_single_context
    self.dialect.do_execute(
    │    │       └ <function DefaultDialect.do_execute at 0x7a7d2a125360>
    │    └ <sqlalchemy.dialects.mysql.asyncmy.MySQLDialect_asyncmy object at 0x7a7d2a11f9d0>
    └ <sqlalchemy.engine.base.Connection object at 0x7a7d20f691e0>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/engine/default.py", line 942, in do_execute
    cursor.execute(statement, parameters)
    │      │       │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
    │      │       └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
    │      └ <function AsyncAdapt_asyncmy_cursor.execute at 0x7a7d29d4a830>
    └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7a7d20f78630>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/dialects/mysql/asyncmy.py", line 95, in execute
    return self.await_(self._execute_async(operation, parameters))
           │    │      │    │              │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
           │    │      │    │              └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
           │    │      │    └ <function AsyncAdapt_asyncmy_cursor._execute_async at 0x7a7d29d4a950>
           │    │      └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7a7d20f78630>
           │    └ <member 'await_' of 'AsyncAdapt_asyncmy_cursor' objects>
           └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7a7d20f78630>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 132, in await_only
    return current.parent.switch(awaitable)  # type: ignore[no-any-return,attr-defined] # noqa: E501
           │       │             └ <coroutine object AsyncAdapt_asyncmy_cursor._execute_async at 0x7a7d20f12960>
           │       └ <attribute 'parent' of 'greenlet.greenlet' objects>
           └ <_AsyncIoGreenlet object at 0x7a7d20f1b800 (otid=0x7a7d2a907d20) dead>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/util/_concurrency_py3k.py", line 196, in greenlet_spawn
    value = await result
                  └ <_cython_3_0_11.coroutine object at 0x7a7d211a1440>
  File "/usr/local/lib/python3.10/site-packages/sqlalchemy/dialects/mysql/asyncmy.py", line 107, in _execute_async
    result = await self._cursor.execute(operation, parameters)
                   │    │               │          └ ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_...
                   │    │               └ 'INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_polic...
                   │    └ <member '_cursor' of 'AsyncAdapt_asyncmy_cursor' objects>
                   └ <sqlalchemy.dialects.mysql.asyncmy.AsyncAdapt_asyncmy_cursor object at 0x7a7d20f78630>
  File "asyncmy/cursors.pyx", line 179, in execute
    result = await self._query(query)
  File "asyncmy/cursors.pyx", line 364, in _query
    await conn.query(q)
  File "asyncmy/connection.pyx", line 496, in query
    await self._read_query_result(unbuffered=unbuffered)
  File "asyncmy/connection.pyx", line 684, in _read_query_result
    await result.read()
  File "asyncmy/connection.pyx", line 1071, in read
    first_packet = await self.connection.read_packet()
  File "asyncmy/connection.pyx", line 646, in read_packet
    packet.raise_for_error()
  File "asyncmy/protocol.pyx", line 190, in asyncmy.protocol.MysqlPacket.raise_for_error
    cpdef raise_for_error(self):
  File "asyncmy/protocol.pyx", line 194, in asyncmy.protocol.MysqlPacket.raise_for_error
    errors.raise_mysql_exception(self._data)
    │      └ <cyfunction raise_mysql_exception at 0x7a7d29e1f510>
    └ <module 'asyncmy.errors' from '/usr/local/lib/python3.10/site-packages/asyncmy/errors.cpython-310-x86_64-linux-gnu.so'>
  File "asyncmy/errors.pyx", line 128, in asyncmy.errors.raise_mysql_exception
    cpdef raise_mysql_exception(bytes data):
          └ <cyfunction raise_mysql_exception at 0x7a7d29e1f510>
  File "asyncmy/errors.pyx", line 137, in asyncmy.errors.raise_mysql_exception
    raise error_class(errno, err_val)

sqlalchemy.exc.IntegrityError: (asyncmy.errors.IntegrityError) (1062, "Duplicate entry 'job-alice-bob-041' for key 'sys_task.PRIMARY'")
[SQL: INSERT INTO sys_task (task_uid, task_name, task_initiator, task_group, task_yaml, concurrent, cron_expression, misfire_policy, status, run_status, task_progress, priority, create_by, create_time, update_by, update_time, remark) VALUES (%s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s, %s)]
[parameters: ('job-alice-bob-041', 'task2', 'alice', 'default', '[{"job_uid": "psi3", "job_executor": "default", "invoke_target": "module_task.scheduler_test.job", "job_args": "", "job_kwargs": "", "job_name": "psi ... (162 characters truncated) ... r_test.job", "job_args": "", "job_kwargs": "", "job_name": "psi2", "job_parties": "[\\"party1\\",\\"party2\\"]", "job_dependencies": "[\\"psi3\\"]"}]', '1', '0/10 * * * * ?', '3', '1', 'not started', 0, '0', '', datetime.datetime(2025, 4, 25, 12, 31, 23, 530024), '', datetime.datetime(2025, 4, 25, 12, 31, 23, 530122), 'test')]
(Background on this error at: https://sqlalche.me/e/20/gkpj)
2025-04-25 12:34:33.524 | 5cd2f5b6ef4842e78603da7aeb55ed37 | INFO     | module_admin.controller.task_controller:stop_task:128 - 任务停止成功
2025-04-25 12:35:08.325 | ac2f447899714dbcb4e65a3e50534a0c | INFO     | module_admin.controller.task_controller:get_task_list:57 - 获取成功
2025-04-25 12:35:48.223 | 4c9872a7ea794c579af332dd85c0d461 | INFO     | module_admin.controller.task_controller:execute_system_task:112 - 执行成功
2025-04-25 12:37:39.999 | 9a4f03ab27e243489a996431e174a20b | INFO     | module_admin.controller.task_controller:query_detail_task:34 - 获取task_uid为job-alice-bob-041的信息成功
2025-04-25 12:38:03.530 | af5ffba4e19444078bc7323c4ee0753d | INFO     | module_admin.controller.task_controller:query_detail_task:34 - 获取task_uid为job-alice-bob-041的信息成功
2025-04-25 12:38:11.703 | 79caea2a07984a90848c7134817990f9 | ERROR    | exceptions.handle:service_exception_handler:34 - 终止任务流失败: 任务流 job-alice-bob-041 不存在或已完成
2025-04-25 20:44:42.066 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 20:44:42.066 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 20:44:42.096 |  | INFO     | config.get_db:init_create_table:26 - 数据库连接成功
2025-04-25 20:44:42.097 |  | INFO     | config.get_redis:create_redis_pool:19 - 开始连接redis...
2025-04-25 20:44:42.101 |  | INFO     | config.get_redis:create_redis_pool:32 - redis连接成功
2025-04-25 20:44:42.101 |  | INFO     | server:lifespan:22 - RuoYi-FastAPI启动成功
2025-04-25 21:02:11.887 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 21:02:11.888 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 21:02:11.918 |  | INFO     | config.get_db:init_create_table:26 - 数据库连接成功
2025-04-25 21:02:11.918 |  | INFO     | config.get_redis:create_redis_pool:19 - 开始连接redis...
2025-04-25 21:02:11.922 |  | INFO     | config.get_redis:create_redis_pool:32 - redis连接成功
2025-04-25 21:02:11.922 |  | INFO     | server:lifespan:22 - RuoYi-FastAPI启动成功
2025-04-25 21:02:20.552 |  | INFO     | config.get_redis:close_redis_pool:52 - 关闭redis连接成功
2025-04-25 21:36:47.295 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 21:36:47.296 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 21:36:47.322 |  | INFO     | config.get_db:init_create_table:26 - 数据库连接成功
2025-04-25 21:36:47.323 |  | INFO     | config.get_redis:create_redis_pool:19 - 开始连接redis...
2025-04-25 21:36:47.327 |  | INFO     | config.get_redis:create_redis_pool:32 - redis连接成功
2025-04-25 21:36:47.327 |  | INFO     | server:lifespan:22 - RuoYi-FastAPI启动成功
2025-04-25 13:37:07.241 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 13:37:07.242 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 13:37:07.274 |  | INFO     | config.get_db:init_create_table:26 - 数据库连接成功
2025-04-25 13:37:07.274 |  | INFO     | config.get_redis:create_redis_pool:19 - 开始连接redis...
2025-04-25 13:37:07.279 |  | INFO     | config.get_redis:create_redis_pool:32 - redis连接成功
2025-04-25 13:37:07.279 |  | INFO     | server:lifespan:22 - RuoYi-FastAPI启动成功
2025-04-25 13:41:19.279 |  | INFO     | server:lifespan:17 - RuoYi-FastAPI开始启动
2025-04-25 13:41:19.279 |  | INFO     | config.get_db:init_create_table:23 - 初始化数据库连接...
2025-04-25 13:41:19.309 |  | INFO     | config.get_db:init_create_table:26 - 数据库连接成功
2025-04-25 13:41:19.309 |  | INFO     | config.get_redis:create_redis_pool:19 - 开始连接redis...
2025-04-25 13:41:19.314 |  | INFO     | config.get_redis:create_redis_pool:32 - redis连接成功
2025-04-25 13:41:19.315 |  | INFO     | server:lifespan:22 - RuoYi-FastAPI启动成功
